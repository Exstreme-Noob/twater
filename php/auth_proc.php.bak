 <?php
$servername = "localhost";
$username = "root";
$password = "";
$dbname = "wswet";
$auth = false;

// Create connection
$conn = new mysqli($servername, $username, $password, $dbname);

$user = $_POST["user"];
$pass = $_POST["passw"];

// Check connection
if (!$conn) {
  die("Connection failed: " . mysqli_connect_error());
}

$sql = "SELECT passwd FROM user WHERE name = '$user'";

//echo $sql."<br>";

$result = $conn->query($sql);

if( $result-> num_rows == 0) {
	$ausgabe = "Benutzername nicht gefunden";
} else {
	$row = $result->fetch_assoc();
	if( $pass == $row["passwd"] ) {
		$ausgabe =  "Herzlich willkommen <br>";
		$auth = true;
	} else {
		$ausgabe =  "Authentifizierung fehlgeschlagen <br>";
	}
}
		
?> 

<!doctype html>
<html lang="de">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>What should we eat today</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
  </head>
  
  <body>
    <h1>Anmeldung:</h1>
		Hallo  <?php echo $user; ?><br>
		<?php echo $ausgabe; ?>
		
<?php		if ($auth){
			$sql = "SELECT * FROM gericht";
			$result = $conn->query($sql);
?>
			
<div class="container mt-3">
		<table border="2" class="table table-striped">
		<tr>
			<th> ID </th>
			<th> Bezeichnung </th>
			<th> Beschreibung </th>
		</tr>
<?php		while ($row = $result->fetch_assoc()){ ?>
		<tr>
			<td> <?php	echo $row['gid']; ?> </td>
			<td> <?php	echo $row['Bezeichnung']; ?> </td>
			<td> <?php	echo $row['Beschreibung']; ?> </td>
		</tr>
<?php } ?>

		</table>
</div>
		
<?php } ?>		
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
  </body>
</html>